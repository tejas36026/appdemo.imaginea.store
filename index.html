
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Typing Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/dom-to-image-more@2.10.1/dist/dom-to-image-more.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script> <!-- Date adapter -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    
    <style>
                html, body { height: 100%; margin: 0; padding: 0; font-family: sans-serif; }

        #print-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--body-background-color, #f4f6f8);
    color: var(--text-primary, #2c3e50);
    display: none; /* Hidden by default */
    justify-content: center;
    align-items: center;
    z-index: 2000; /* Must be on top of everything */
    text-align: center;
}
#print-overlay.show {
    display: flex;
}
.print-overlay-content h2 {
    font-size: 1.5em;
    margin-bottom: 10px;
}

        :root { 
            --body-background-color: #f4f6f8;
            --editor-bg: #ffffff;
            --header-bg: rgba(255, 255, 255, 0.9);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --border-color: #e0e0e0;
            --color-primary-01: #3498db;
            --color-error: #e74c3c;
            --color-warning: #f39c12;
            --color-success: #2ecc71;
            --color-bar-1: rgba(52, 152, 219, 0.7);  /* Primary blue with opacity */
            --color-bar-2: rgba(243, 156, 18, 0.7); /* Warning orange with opacity */
            --color-line-1: rgba(52, 152, 219, 0.8);
            --color-line-2: rgba(231, 76, 60, 0.8); /* Error red with opacity */
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #ffffff;
            --btn-hover-bg: #2980b9; /* Darker shade of primary blue */
            --highlight-red-bg: rgba(231, 0, 0, 0.35);  /* Light red background for pasted */
            --highlight-yellow-bg: rgba(243, 156, 18, 0.15);/* Light yellow background for typed */
            --highlight-green-bg: rgba(46, 204, 113, 0.1); /* Light green background for corrected */
            --color-warning-rgb: 243, 156, 18; /* For rgba in JS if needed */
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 0, 0, 0.5);
            --icon-stroke-color: var(--text-secondary);
            --icon-stroke-color-active: var(--text-primary);
        }
        
        body.theme-dark {
            --body-background-color: #1a1d24;
            --editor-bg: #232730;
            --header-bg: rgba(35, 39, 48, 0.85);
            --text-primary: #e0e0e0;   /* Off-white */
            --text-secondary: #909090;
            --border-color: #383c4a;
            --color-primary-01: #5dade2;
            --color-error: #ff6b6b;    /* Lighter red for dark theme */
            --color-warning: #ffc078;  /* Lighter yellow for dark theme */
            --color-success: #76d7c4;  /* Lighter green for dark theme */
        
            --color-bar-1: rgba(93, 173, 226, 0.7);
            --color-bar-2: rgba(255, 192, 120, 0.7);
            --color-line-1: rgba(93, 173, 226, 0.8);
            --color-line-2: rgba(255, 107, 107, 0.8);
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #1a1d24; /* Dark text on light blue button */
            --btn-hover-bg: #4a90e2; /* Slightly different hover */
        
            /* Highlight colors for TEXT SEGMENTS in DARK THEME */
            --highlight-red-bg: rgba(255, 107, 107, 0.2);
            --highlight-yellow-bg: rgba(255, 192, 120, 0.2);
            --highlight-green-bg: rgba(118, 215, 196, 0.15);
        
            --color-warning-rgb: 255, 192, 120;
        
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 0, 0, 0.7);
        
            --icon-stroke-color: var(--text-secondary);
            --icon-stroke-color-active: var(--text-primary);
        }
        
        body.theme-blue-neon {
            --body-background-color: #0a0a23;
            --editor-bg: #00001a;
            --header-bg: rgba(10, 10, 40, 0.9);
            --text-primary: #00e5ff;      /* Bright Neon Cyan */
            --text-secondary: #00aacc;
            --border-color: #0077ff;
            --color-primary-01: #00e5ff;
            --color-error: #ff3366;      /* Neon Pink/Red */
            --color-warning: #ffff66;    /* Neon Yellow */
            --color-success: #66ff66;    /* Neon Green */
            font-family: 'VT323', monospace;
        
            --color-bar-1: rgba(0, 229, 255, 0.7);
            --color-bar-2: rgba(255, 255, 102, 0.7);
            --color-line-1: rgba(0, 229, 255, 0.8);
            --color-line-2: rgba(255, 51, 102, 0.8);
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #0a0a23; /* Dark text on bright button */
            --btn-hover-bg: #00c4dd;
        
            --highlight-red-bg: rgba(255, 51, 102, 0.3);
            --highlight-yellow-bg: rgba(255, 255, 102, 0.3);
            --highlight-green-bg: rgba(102, 255, 102, 0.2);
        
            --color-warning-rgb: 255, 255, 102;
        
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 10, 40, 0.8);
        
            --icon-stroke-color: var(--text-secondary);
            --icon-stroke-color-active: var(--text-primary);
             font-family: 'VT323', monospace; /* Apply to whole body for neon */
        }
        
        /* Update icon colors */
        .btn svg, .theme-controls .theme-btn svg, .theme-controls-dashboard .theme-btn-dashboard svg {
            stroke: var(--icon-stroke-color); /* Use CSS variable for stroke */
        }
        .btn:hover svg, .theme-btn:hover svg, .theme-btn-dashboard:hover svg {
            stroke: var(--btn-primary-text); /* Or a specific hover icon color */
        }
        .theme-btn.active-theme svg, .theme-btn-dashboard.active-theme svg {
            stroke: var(--btn-primary-text) !important; /* Ensure active icon matches text */
        }
        
        /* Ensure calendar picker icon inverts on dark/neon themes for date inputs */
        body.theme-dark .filters-container input[type="date"]::-webkit-calendar-picker-indicator,
        body.theme-blue-neon .filters-container input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }
        body.theme-light .filters-container input[type="date"]::-webkit-calendar-picker-indicator {
            filter: none; /* Explicitly reset for light theme */
        }
        
        /* Text input placeholder color */
        textarea::placeholder { color: var(--text-secondary); opacity: 0.7; }
        #jsEditor { opacity: 1; /* Remove the 0.3 opacity from jsEditor */ }
        
        /* General chart text color (Chart.js often needs direct config, but this helps some elements) */
        .chart-container text, .chart-container .tick text { /* SVG text elements */
            fill: var(--text-secondary) !important;
        }
        .chart-container .chartjs-legend-title, .chart-container .chartjs-axis-title { /* Chart.js specific classes if they exist */
            color: var(--text-secondary) !important;
        }
        body.theme-blue-neon .dashboard-header h1,
        body.theme-blue-neon .metric-card h3,
        body.theme-blue-neon .metric-card .value,
        body.theme-blue-neon .daily-insight-card h4 {
            text-shadow: 0 0 3px var(--color-primary-01), 0 0 5px var(--color-primary-01);
        }
        
                .dashboard-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                    padding-bottom: 15px;
                    border-bottom: 1px solid var(--border-color);
                }
        
                .dashboard-header h1 {
                   color: var(--color-primary-01);
                   margin: 0;
                   border-bottom: none;
                }
        
                .filters-container {
                    display: flex;
                    gap: 15px;
                    align-items: center;
                }
        
                .filters-container label {
                    font-size: 0.9em;
                    color: var(--text-secondary);
                }
        
                .filters-container input[type="date"],
                .filters-container button {
                    padding: 8px 12px;
                    background-color: var(--editor-bg);
                    color: var(--text-primary);
                    border: 1px solid var(--border-color);
                    border-radius: 4px;
                    font-size: 0.9em;
                }
                .filters-container input[type="date"]::-webkit-calendar-picker-indicator {
                    filter: invert(1); /* Make calendar icon visible on dark backgrounds */
                }
        
        
                .filters-container button {
                    cursor: pointer;
                    background-color: var(--color-primary-01);
                }
                .filters-container button:hover {
                    opacity: 0.9;
                }
        
                .print-dashboard-btn {
                    padding: 8px 12px;
                    background-color: #28a745; /* Green for general print */
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.9em;
                }
                 .print-dashboard-btn:hover { opacity: 0.9; }
        
        
                .dashboard-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 20px;
                    margin-bottom: 20px;
                }
        
                .metric-card {
                    background-color: var(--editor-bg);
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    padding: 20px;
                    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
                    display: flex;
                    flex-direction: column;
                    position: relative; /* For print button */
                }
                .metric-card.full-width {
                    grid-column: 1 / -1;
                }
        
                .metric-card h3 {
                    margin-top: 0;
                    margin-bottom: 15px;
                    font-size: 1.1em;
                    color: var(--text-secondary);
                    border-bottom: 1px solid var(--border-color);
                    padding-bottom: 8px;
                    font-weight: 500;
                }
        
                .metric-card .value {
                    font-size: 2em;
                    font-weight: 600;
                    color: var(--text-primary);
                    margin-bottom: 8px;
                }
        
                .metric-card .details {
                    font-size: 0.95rem;
                    color: var(--text-secondary);
                    line-height: 1.5;
                }
                .metric-card .details div { margin-bottom: 5px; }
                .metric-card .details span {
                    font-weight: 500;
                    color: var(--text-primary);
                    margin-left: 6px;
                }
                .metric-card small {
                    font-size: 0.8em;
                    color: var(--text-secondary);
                    margin-top: auto;
                    padding-top: 10px;
                }
        
                .print-element-btn {
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: rgba(255,255,255,0.1);
                    border: 1px solid var(--border-color);
                    color: var(--text-secondary);
                    border-radius: 4px;
                    padding: 4px 6px;
                    cursor: pointer;
                    font-size: 0.9em;
                    opacity: 0.7;
                }
                .print-element-btn:hover { opacity: 1; background: rgba(255,255,255,0.2); }
                .print-element-btn svg { width: 14px; height: 14px; vertical-align: middle; }
        
                .chart-container {
                     margin-top: 15px;
                     position: relative;
                     height: 300px; /* Default chart height */
                     width: 100%;
                }
                 canvas { max-width: 100%; max-height: 100%; }
        
                #dailyInsightsContainer h2 {
                    margin-top: 30px;
                }
                .daily-insight-card {
                    background-color: var(--editor-bg);
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    padding: 15px;
                    margin-bottom: 15px;
                }
        
                .daily-insight-card h4 {
                    margin-top: 0;
                    color: var(--color-primary-01);
                }
        
                .daily-insight-card p {
                    font-size: 0.9em;
                    margin: 5px 0;
                }
        
                .daily-insight-card p strong { color: var(--text-primary); }
        
        
                .refresh-button { /* Already styled in your example */ }
        
        
        
                
        
                /* Add this to dashboard.html's <style> block, along with body theme variable definitions */
                .theme-controls-dashboard .theme-btn-dashboard svg {
                    stroke: var(--text-secondary); /* Initial icon color */
                }
                .theme-controls-dashboard .theme-btn-dashboard:hover svg {
                    stroke: var(--btn-primary-text);
                }
                .theme-controls-dashboard .theme-btn-dashboard.active-theme {
                    background-color: var(--btn-primary-bg) !important;
                    color: var(--btn-primary-text) !important;
                }
                .theme-controls-dashboard .theme-btn-dashboard.active-theme svg {
                    stroke: var(--btn-primary-text) !important;
                }
        
                /* General styling for dashboard elements if they don't pick up variables correctly */
                .dashboard-header h1 { color: var(--color-primary-01); /* Ensure this uses theme variable */ }
                .filters-container label { color: var(--text-secondary); }
                .filters-container input[type="date"],
                .filters-container button {
                    background-color: var(--editor-bg);
                    color: var(--text-primary);
                    border: 1px solid var(--border-color);
                }
        
                .theme-dark .filters-container input[type="date"]::-webkit-calendar-picker-indicator,
                .theme-blue-neon .filters-container input[type="date"]::-webkit-calendar-picker-indicator {
                    filter: invert(1);
                }
        
                .metric-card {
                    background-color: var(--editor-bg);
                    border: 1px solid var(--border-color);
                }
                .metric-card h3 {
                    color: var(--text-secondary);
                    border-bottom: 1px solid var(--border-color);
                }
                .metric-card .value { color: var(--text-primary); }
                .metric-card .details, .metric-card small { color: var(--text-secondary); }
                .metric-card .details span { color: var(--text-primary); }
                .daily-insight-card {
                    background-color: var(--editor-bg);
                    border: 1px solid var(--border-color);
                }
                .daily-insight-card h4 { color: var(--color-primary-01); }
                .daily-insight-card p strong { color: var(--text-primary); }
        
                /* Chart.js text color based on theme */
                /* This might need adjustment based on how Chart.js handles colors */
                .chart-container canvas { /* This is a general selector, might need more specific if Chart.js creates wrappers */
                    /* Chart.js typically handles its own colors, but you can set defaults */
                }
                .theme-dark .chart-container text, .theme-dark .chart-container .tick text,
                .theme-blue-neon .chart-container text, .theme-blue-neon .chart-container .tick text {
                    fill: var(--text-secondary) !important; /* Try to force Chart.js legend/axis text color */
                }
                .theme-dark .chart-container .chartjs-legend-title, .theme-dark .chart-container .chartjs-axis-title,
                .theme-blue-neon .chart-container .chartjs-legend-title, .theme-blue-neon .chart-container .chartjs-axis-title {
                    color: var(--text-secondary) !important;
                }
                body.theme-blue-neon {
        
                }
                .theme-blue-neon .dashboard-header h1,
                .theme-blue-neon .metric-card h3,
                .theme-blue-neon .metric-card .value,
                .theme-blue-neon .daily-insight-card h4 {
                    text-shadow: 0 0 3px var(--color-primary-01), 0 0 5px var(--color-primary-02, #0077ff);
                }
        
        
                .highlighted-text-output-dashboard {
                    background-color: var(--editor-bg); /* Match card background or make it distinct */
                    border: 1px solid var(--border-color);
                    border-radius: 4px;
                    padding: 15px;
                    font-family: var(--font-family-monospace); /* From your root vars */
                    font-size: 14px; /* Slightly smaller for dashboard view */
                    line-height: 1.5;
                    white-space: pre-wrap;
                    word-break: break-all;
                    /* max-height: 300px; */ /* Or as desired - REMOVED FOR FULL DISPLAY */
                    /* overflow-y: auto; */ /* REMOVED FOR FULL DISPLAY */
                    color: var(--text-primary); /* Ensure text is visible */
                }
        
                    
        
                .highlight-fast-no-mistake { background-color: var(--highlight-yellow-bg); border-bottom: 2px solid var(--color-warning); font-weight: 500;}
        
        
                .highlight-slow { background-color: var(--highlight-green-bg); opacity: 0.85; } /* Can also be green */
                .highlight-typed { /* Default, no specific background or slight tint if needed */ }
                .highlight-anomaly-speed { color: var(--color-error) !important; font-weight: bold; border-bottom: 2px dashed var(--color-error); } /* For the text itself to be red */
        
        
                .highlight-fast-no-mistake { background-color: var(--highlight-yellow-bg); border-bottom: 2px solid var(--color-warning); font-weight: 500;}
                        .highlight-corrected-slow { background-color: var(--highlight-green-bg); }
                        .theme-blue-neon .highlight-pasted { text-shadow: 0 0 3px var(--color-error); }
                        .theme-blue-neon .highlight-fast-no-mistake { text-shadow: 0 0 3px var(--color-warning); }
                        .theme-blue-neon .highlight-corrected-slow { text-shadow: 0 0 3px var(--color-success); }
        
                        .highlight-wpm-spike {
                    background-color: rgba(231, 76, 60, 0.15); /* Lighter red background (similar to --highlight-red-bg) */
                    /* color: #c0392b; */ /* Darker red text for contrast on light red bg, or use var(--color-error) */
                    /* border-bottom: 1px dashed var(--color-error); */
                    font-style: italic; /* Adding some distinction */
                }
                .highlight-anomaly-speed {
                    /* This class is also used for chart points. For text, make it distinct: */
                    background-color: rgba(231, 76, 60, 0.15); /* Light red background */
                    color: var(--color-error); /* Keep text red */
                    font-weight: normal; /* Normal weight for text, chart point is bold */
                    /* border-bottom: 1px dotted var(--color-error); */ /* Softer border for text */
                }
        
        
                .highlight-slow { background-color: var(--highlight-green-bg); opacity: 0.85; } /* Can also be green */
                /* If you had specific classes from main.js for backspace/undo, style them green: */
                /* .highlight-corrected-by-backspace { background-color: var(--highlight-green-bg); } */
                /* .highlight-corrected-by-undo { background-color: var(--highlight-green-bg); } */
        
                /* Yellow variants (for the 3-consecutive rule) */
                .highlight-fast-no-mistake { background-color: var(--highlight-yellow-bg); border-bottom: 2px solid var(--color-warning); font-weight: 500;}
        
        
        
        
                /* For the >30% WPM increase - "light red" */
                .highlight-wpm-spike {
                    background-color: rgba(231, 76, 60, 0.15); /* Lighter red background (similar to --highlight-red-bg) */
                    /* color: #c0392b; */ /* Darker red text for contrast on light red bg, or use var(--color-error) */
                    /* border-bottom: 1px dashed var(--color-error); */
                    font-style: italic; /* Adding some distinction */
                }
        
                /* If 'highlight-anomaly-speed' is already used by main.js for WPM spikes and should be light red FOR TEXT */
                .highlight-anomaly-speed {
                    /* This class is also used for chart points. For text, make it distinct: */
                    background-color: rgba(231, 76, 60, 0.15); /* Light red background */
                    color: var(--color-error); /* Keep text red */
                    font-weight: normal; /* Normal weight for text, chart point is bold */
                    /* border-bottom: 1px dotted var(--color-error); */ /* Softer border for text */
                }
        
        
        .highlight-slow {
            background-color: var(--highlight-green-bg);
            opacity: 0.85;
        }
        
        /* Yellow Variants */
        .highlight-fast-no-mistake {
            background-color: var(--highlight-yellow-bg);
            border-bottom: 2px solid var(--color-warning);
            font-weight: 500;
        }
        
        
        
        /* For the >30% WPM increase - "light red" text highlight */
        .highlight-wpm-spike {
            background-color: rgba(231, 76, 60, 0.1); /* Very light red background */
            color: var(--color-error); /* Red text */
            /* border-bottom: 1px dashed var(--color-error); */
            font-style: italic;
        }
        
        /* If 'highlight-anomaly-speed' is used for WPM spikes text */
        .highlight-anomaly-speed {
            background-color: rgba(231, 76, 60, 0.1); /* Very light red background */
            color: var(--color-error);                /* Red text */
            font-weight: normal;                      /* Normal for text (chart points might be bold) */
            /* border-bottom: 1px dotted var(--color-error); */
        }
        
        /* Default typed text (optional, if you want a very subtle distinction) */
        .highlight-typed {
            /* No specific background by default, or a very subtle one */
            /* background-color: rgba(0,0,0,0.01); */
        }
        
        
        /* Theme-specific overrides for better contrast/effect on Neon */
        body.theme-blue-neon .highlight-corrected {
            background-color: var(--highlight-green-bg) !important; /* Ensure it overrides */
            text-shadow: 0 0 3px var(--color-success);
        }
        body.theme-blue-neon .highlight-pasted { text-shadow: 0 0 3px var(--color-error); }
        body.theme-blue-neon .highlight-fast-no-mistake { text-shadow: 0 0 3px var(--color-warning); }
        body.theme-blue-neon .highlight-no-mistake {
            background-color: rgba(var(--color-warning-rgb), 0.2);
            text-shadow: 0 0 2px var(--color-warning);
        }
        body.theme-blue-neon .highlight-slow {
            opacity: 0.9;
            text-shadow: 0 0 2px var(--color-success);
        }
        body.theme-blue-neon .highlight-wpm-spike,
        body.theme-blue-neon .highlight-anomaly-speed {
            background-color: rgba(255, 51, 102, 0.2); /* Neon light red background */
            color: var(--color-error);                 /* Neon red text */
            text-shadow: 0 0 3px var(--color-error);
        }
        .highlight-pasted {
          color: #000000 !important; /* Added !important for testing to override other rules */
          /* You can also add other styles if you like, e.g., a light red background */
          background-color: #ff0000;
        }
        
        .highlight-no-mistake {
          color: #000000; /* Example yellow - adjust to your actual yellow */
          background-color: #ffff00; /* Example light yellow background */
        }
        
        .highlight-corrected {
          color: #000000;
          background-color: #00ff00;
        }
           
        
                .highlight-slow { background-color: var(--highlight-green-bg); opacity: 0.85; }
        
        .chart-nav-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .chart-nav-btn { /* Use your .btn .btn-sm styling or adapt */
            padding: 5px 10px;
            font-size: 0.9em;
            background-color: var(--editor-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 4px;
        }
        .chart-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .chart-nav-btn:hover:not(:disabled) {
            background-color: var(--btn-hover-bg);
            color: var(--btn-primary-text);
        }
        
        .segment-stats-tooltip {
            display: inline-block; /* Or 'block' if you want it on a new line */
            margin-left: 8px;     /* Space it out from the sentence text */
            padding: 2px 5px;
            background-color: #f0f0f0; /* Light grey background */
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 0.8em;      /* Smaller font for the stats */
            color: #333;
            /* white-space: nowrap; /* Prevent wrapping if stats are short */
        }
        
        .segment-stats-tooltip span {
            margin-right: 8px; /* Space between individual stats */
        }
        .segment-stats-tooltip span:last-child {
            margin-right: 0;
        }
        .segment-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        .segment-stats-tooltip {
            display: block; 
            margin-left: 0;
            margin-top: 3px; 
            background-color: var(--editor-bg);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        body.theme-dark .segment-stats-tooltip {
            background-color: #3a3f4b; /* Darker grey */
            border-color: #505562;
            color: #ccc;
        }
        
        body.theme-blue-neon .segment-stats-tooltip {
            background-color: #002244; /* Dark neon blue */
            border-color: var(--text-secondary);
            color: var(--text-primary);
            box-shadow: 0 0 3px var(--text-secondary);
            font-family: 'Courier New', Courier, monospace; /* Or your neon font */
        }
        
        
        
        
        
        /* Styles for sentence container and tooltips (Matches index.html) */
        /* Ensure .highlighted-text-output-dashboard is the parent in dashboard.html */
        .highlighted-text-output-dashboard {
            /* Add or adjust existing styles like border, padding, height, overflow-y */
            white-space: normal; /* Allows inline-block children to wrap */
            line-height: 1.8;    /* Increased for better readability */
            padding: 10px;       /* Example padding */
            /* border: 1px solid var(--border-color); */ /* Already in .metric-card styling */
            /* max-height: 300px; */ /* Already set, but will be overridden by ID */
            /* overflow-y: auto; */  /* Already set, but will be overridden by ID */
        }
        
        /* index.html <style> section */
        
        /* ... (keep your :root, body.theme-dark, body.theme-blue-neon variable definitions for --highlight-*-bg etc.) ... */
        
        /* --- Base styles for segment text content --- */
        
        /* --- Core Highlighting Logic --- */
        /* Default (effectively light theme if no body class or body.theme-light) */
        .highlight-yellow-typed {
            background-color: var(--highlight-yellow-bg); /* Uses :root version */
            color: #000000; /* Black text on light yellow */
        }
        .highlight-red-pasted {
            background-color: var(--highlight-red-bg);   /* Uses :root version */
            color: #000000; /* Black text on light red */
        }
        .highlight-green-corrected {
            background-color: var(--highlight-green-bg); /* Uses :root version */
            color: #000000; /* Black text on light green */
        }
        
        /* Dark Theme Overrides */
        body.theme-dark .highlight-yellow-typed {
            background-color: var(--highlight-yellow-bg); /* Uses body.theme-dark version */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary (e.g., off-white) */
        }
        body.theme-dark .highlight-red-pasted {
            background-color: var(--highlight-red-bg);   /* Uses body.theme-dark version */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary */
        }
        body.theme-dark .highlight-green-corrected {
            background-color: var(--highlight-green-bg); /* Uses body.theme-dark version */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary */
        }
        
        /* Blue Neon Theme Overrides */
        body.theme-blue-neon .highlight-yellow-typed {
            background-color: var(--highlight-yellow-bg); /* Uses body.theme-blue-neon version */
            color: var(--color-warning); /* Explicit neon yellow TEXT */
        
        }
        body.theme-blue-neon .highlight-red-pasted {
            background-color: var(--highlight-red-bg);   /* Uses body.theme-blue-neon version */
            color: var(--color-error);   /* Explicit neon red TEXT */
        
        }
        body.theme-blue-neon .highlight-green-corrected {
            background-color: var(--highlight-green-bg); /* Uses body.theme-blue-neon version */
            color: var(--color-success); /* Explicit neon green TEXT */
        
        }
        
        /* Tooltip theming (should be mostly correct from your existing code) */
        .segment-tooltip {
            /* ... existing general tooltip styles ... */
            background-color: var(--editor-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary); /* Primary text color of the current theme */
        }
        
        body.theme-dark .segment-tooltip {
            background-color: #3a3f4b; /* Specific dark theme override */
            border-color: #505562;    /* Specific dark theme override */
            color: #e0e0e0;            /* Specific dark theme override */
        }
        
        body.theme-blue-neon .segment-tooltip {
            background-color: #001f3f;            /* Specific neon theme override */
            border-color: var(--text-secondary); /* Uses neon theme's secondary text for border */
            color: var(--text-primary);          /* Uses neon theme's primary text for tooltip text */
            box-shadow: 0 0 3px var(--text-secondary);
        }
        
        /* --- IMPORTANT: Ensure no other conflicting rules for these classes --- */
        /* Search your CSS for any other instances of:
           .highlight-yellow-typed
           .highlight-red-pasted
           .highlight-green-corrected
           .segment-text-content
           And remove or comment out any hardcoded `color` or `background-color` properties
           that might be overriding these theme-based rules, especially if they use `!important`.
        */
        .highlighted-text-output-dashboard .sentence-block { /* Target within dashboard context */
            display: inline-block;
            margin-right: 0.6em;
            margin-bottom: 0.4em;
            padding: 3px 5px;
            border-radius: 4px;
            vertical-align: top;
            /* Optional: background based on theme if desired for the block itself */
            /* background-color: rgba(var(--text-primary-rgb, 0,0,0), 0.03); */
        }
        
        /* Spans within sentence-block (the actual text parts) */
        .highlighted-text-output-dashboard .sentence-block span {
            display: inline;
            white-space: pre-wrap; /* Respects newlines and spaces within the text */
        }
        
        /* Styles for the always-visible tooltip data in dashboard */
        .tooltip-visible-data-dashboard { /* Using a distinct class for dashboard styling */
            display: inline;
            font-size: 0.8em;
            margin-left: 0.5em;
            font-style: italic;
            padding: 1px 4px;
            border-radius: 3px;
            opacity: 0.85;
        }
        
        /* Theme-specific styling for the visible tooltip in dashboard */
        body.theme-light .tooltip-visible-data-dashboard {
            color: #555;
            background-color: rgba(0,0,0,0.04);
        }
        body.theme-dark .tooltip-visible-data-dashboard {
            color: #bbb;
            background-color: rgba(255,255,255,0.08);
        }
        body.theme-blue-neon .tooltip-visible-data-dashboard {
            color: #a0d8ff;
            background-color: rgba(0, 50, 100, 0.4);
        }
        
        
        #highlighted-output-container {
            padding: 10px; /* Ensure consistent padding */
            line-height: 1; /* Reset if it causes issues */
            text-align: left; /* Or your desired alignment for the row of segments */
        }
        
        .segment-wrapper {
            display: inline-block; /* Segments flow inline but act as blocks */
            position: relative;
            /* Top margin for tooltip, 8px side margins giving 16px total between blocks */
            margin: 25px 8px 5px 8px;
            vertical-align: top; /* Align blocks from their top edge */
        }
        
        .segment-tooltip {
            bottom: 100%; /* Position directly above the wrapper's top edge */
            left: 50%;
            margin-bottom: 4px; /* Space between tooltip and segment block */
            padding: 3px 6px;
            background-color: var(--editor-bg); /* Use theme variable for background */
            border: 1px solid var(--border-color); /* Use theme variable for border */
            color: var(--text-primary); /* Use theme variable for text */
            border-radius: 4px;
            font-size: 0.75em;
            white-space: normal; /* Allow tooltip text to wrap to multiple lines */
            max-width: 170px;    /* SLIGHTLY REDUCED: Max width for a tooltip (was 180px) */
            min-width: 60px;     /* ADDED: Minimum width for a tooltip to prevent it becoming too squished */
            word-break: break-word; /* Helps break long words if necessary */
            text-align: center;  /* Center text within the tooltip, especially if it wraps */
            z-index: 10;         /* Ensure tooltip is above segment text */
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        
        
        #dashboardHighlightedText {
                    padding: 10px;
                    line-height: 1;
                    text-align: left;
                    background-color: var(--editor-bg);
                    border: 1px solid var(--border-color);
                    border-radius: 4px;
                    font-family: var(--font-family-monospace, monospace);
                    font-size: 14px;
                    white-space: pre-wrap; /* Allows wrapping of segment blocks */
                    word-break: break-all;
                    /* max-height: 300px; REMOVED FOR FULL DISPLAY */
                    /* overflow-y: auto; REMOVED FOR FULL DISPLAY */
                    max-height: none; /* ADDED FOR FULL DISPLAY */
                    overflow-y: visible; /* ADDED FOR FULL DISPLAY */
                    color: var(--text-primary);
                }
        
        /* Wrapper for each segment block + its tooltip */
        
        /* The colored text block itself */
        
        
        
        
        /* Dark Theme Highlight Overrides (applied if body.theme-dark) */
        body.theme-dark #dashboardHighlightedText .highlight-yellow-typed {
            background-color: var(--highlight-yellow-bg); /* Uses body.theme-dark variable */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary (e.g., off-white) */
        }
        body.theme-dark #dashboardHighlightedText .highlight-red-pasted {
            background-color: var(--highlight-red-bg);   /* Uses body.theme-dark variable */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary */
        }
        body.theme-dark #dashboardHighlightedText .highlight-green-corrected {
            background-color: var(--highlight-green-bg); /* Uses body.theme-dark variable */
            color: var(--text-primary); /* Uses body.theme-dark --text-primary */
        }
        
        /* Blue Neon Theme Highlight Overrides (applied if body.theme-blue-neon) */
        body.theme-blue-neon #dashboardHighlightedText .highlight-yellow-typed {
            background-color: var(--highlight-yellow-bg); /* Uses body.theme-blue-neon variable */
            color: var(--color-warning); /* Explicit neon yellow TEXT */
        
        }
        body.theme-blue-neon #dashboardHighlightedText .highlight-red-pasted {
            background-color: var(--highlight-red-bg);   /* Uses body.theme-blue-neon variable */
            color: var(--color-error);   /* Explicit neon red TEXT */
        
        }
        body.theme-blue-neon #dashboardHighlightedText .highlight-green-corrected {
            background-color: var(--highlight-green-bg); /* Uses body.theme-blue-neon variable */
            color: var(--color-success); /* Explicit neon green TEXT */
        
        }
        
        
        
        /* Theme-specific tooltip colors for dashboard */
        body.theme-dark #dashboardHighlightedText .segment-tooltip {
            background-color: #3a3f4b; /* Darker background for tooltip */
            border-color: #505562;    /* Darker border */
            color: #e0e0e0;            /* Light text */
        }
        
        body.theme-blue-neon #dashboardHighlightedText .segment-tooltip { /* Added specificity */
            background-color: #001f3f;
            border-color: var(--text-secondary);
            color: var(--text-primary);
        }
        
        
        /* In dashboard.html <style> */
            #dashboardHighlightedText {
            padding: 10px;
            line-height: 1; /* Base line-height for the container */
            text-align: left;
            background-color: var(--editor-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: var(--font-family-monospace, monospace);
            font-size: 14px;
            white-space: pre-wrap; /* Allows wrapping of segment blocks if they exceed container width */
            word-break: break-all; /* Might be too aggressive, consider 'break-word' if needed */
            /* max-height: 300px; REMOVED FOR FULL DISPLAY */
            /* overflow-y: auto; REMOVED FOR FULL DISPLAY */
            max-height: none; /* ADDED FOR FULL DISPLAY */
            overflow-y: visible; /* ADDED FOR FULL DISPLAY */
            color: var(--text-primary); /* Default text color for the container (e.g., for <p> fallback) */
        }
        
        
        /* Wrapper for each segment block + its tooltip */
        #dashboardHighlightedText .segment-wrapper {
                    display: inline-block; /* KEY FOR INLINE FLOW */
                    position: relative;
                    margin: 25px 8px 5px 8px;
                    vertical-align: top;
                }
        
        
        
        
                :root {
                    --body-background-color: #f4f6f8;
                    --editor-bg: #ffffff; /* Used for card backgrounds, inputs */
                    --header-bg: rgba(255, 255, 255, 0.9);
                    --text-primary: #2c3e50;
                    --text-secondary: #7f8c8d;
                    --border-color: #e0e0e0;
                    --color-primary-01: #3498db; /* Main accent */
                    --color-error: #e74c3c;
                    --color-warning: #f39c12;
                    --color-success: #2ecc71;
                    --color-bar-1: rgba(52, 152, 219, 0.7);
                    --color-bar-2: rgba(243, 156, 18, 0.7);
                    --color-line-1: rgba(52, 152, 219, 0.8);
                    --color-line-2: rgba(231, 76, 60, 0.8);
                    --highlight-red-bg: rgba(231, 76, 60, 0.25);    /* Pasted background */
                    --highlight-yellow-bg: rgba(243, 156, 18, 0.15); /* Typed no correction background */
                    --highlight-green-bg: rgba(46, 204, 113, 0.1);  /* Corrected background */
                    --font-family-base: 'Inter', sans-serif; /* Default font */
                    --font-family-monospace: 'Courier New', Courier, monospace; /* For code/text areas if needed */
                }
        
                body {
                    background-color: var(--body-background-color);
                    color: var(--text-primary);
                    font-family: var(--font-family-base);
                    margin: 0;
                    padding: 20px;
                    transition: background-color 0.3s ease, color 0.3s ease;
                    box-sizing: border-box;
                }
                *, *::before, *::after { box-sizing: inherit; }
        
                body.theme-authenticheck-dark { /* NEW DEFAULT THEME */
                    --body-background-color: #0A192F;
                    --editor-bg: #112240;
                    --header-bg: rgba(10, 25, 47, 0.85); /* Matches index.html header slightly more opaque */
                    --text-primary: #ccd6f6;
                    --text-secondary: #8892b0;
                    --border-color: #1d3150;
                    --color-primary-01: #64ffda; /* Teal accent */
                    --color-error: #ff5252;    /* Bright red for error text */
                    --color-warning: #ffd700;  /* Gold/bright yellow for warning text */
                    --color-success: #64ffda;  /* Teal accent for success text */
                    --color-bar-1: rgba(100, 255, 218, 0.7);
                    --color-bar-2: rgba(255, 215, 0, 0.7);
                    --color-line-1: rgba(100, 255, 218, 0.8);
                    --color-line-2: rgba(255, 82, 82, 0.8);
                    --highlight-red-bg: rgba(255, 82, 82, 0.15);
                    --highlight-yellow-bg: rgba(255, 215, 0, 0.1);
                    --highlight-green-bg: rgba(100, 255, 218, 0.1);
                    --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
                    --font-family-monospace: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
                }
        
                body.theme-light { /* Explicit Light Theme (same as :root defaults but good for specificity) */
                    /* Variables are already set in :root, this class ensures they apply if body has it */
                }
        
                body.theme-dark {
                    --body-background-color: #1a1d24;
                    --editor-bg: #232730;
                    --header-bg: rgba(35, 39, 48, 0.85);
                    --text-primary: #e0e0e0;
                    --text-secondary: #909090;
                    --border-color: #383c4a;
                    --color-primary-01: #5dade2;
                    --color-error: #ff6b6b;
                    --color-warning: #ffc078;
                    --color-success: #76d7c4;
                    --color-bar-1: rgba(93, 173, 226, 0.7);
                    --color-bar-2: rgba(255, 192, 120, 0.7);
                    --color-line-1: rgba(93, 173, 226, 0.8);
                    --color-line-2: rgba(255, 107, 107, 0.8);
                    --highlight-red-bg: rgba(255, 107, 107, 0.2);
                    --highlight-yellow-bg: rgba(255, 192, 120, 0.2);
                    --highlight-green-bg: rgba(118, 215, 196, 0.15);
                }
        
                body.theme-blue-neon {
                    --body-background-color: #0a0a23;
                    --editor-bg: #00001a;
                    --header-bg: rgba(10, 10, 40, 0.9);
                    --text-primary: #00e5ff;
                    --text-secondary: #00aacc;
                    --border-color: #0077ff;
                    --color-primary-01: #00e5ff;
                    --color-error: #ff3366;
                    --color-warning: #ffff66;
                    --color-success: #66ff66;
                    --font-family-base: 'VT323', monospace;
                    --font-family-monospace: 'VT323', monospace;
                    --color-bar-1: rgba(0, 229, 255, 0.7);
                    --color-bar-2: rgba(255, 255, 102, 0.7);
                    --color-line-1: rgba(0, 229, 255, 0.8);
                    --color-line-2: rgba(255, 51, 102, 0.8);
                    --highlight-red-bg: rgba(255, 51, 102, 0.3);
                    --highlight-yellow-bg: rgba(255, 255, 102, 0.3);
                    --highlight-green-bg: rgba(102, 255, 102, 0.2);
                }
                body.theme-blue-neon .dashboard-header h1,
                body.theme-blue-neon .metric-card h3,
                body.theme-blue-neon .metric-card .value,
                body.theme-blue-neon .daily-insight-card h4,
                body.theme-authenticheck-dark .dashboard-header h1, /* Apply similar text shadow for AuthentiCheck if desired */
                body.theme-authenticheck-dark .metric-card h3 {
                    text-shadow: 0 0 2px var(--color-primary-01);
                }
        
                /* General Element Styling */
                .dashboard-header {
                    display: flex; justify-content: space-between; align-items: center;
                    margin-bottom: 20px; padding-bottom: 15px;
                    border-bottom: 1px solid var(--border-color);
                }
                .dashboard-header h1 { color: var(--color-primary-01); margin: 0; }
        
                .filters-container { display: flex; gap: 15px; align-items: center; }
                .filters-container label { font-size: 0.9em; color: var(--text-secondary); }
                .filters-container input[type="date"],
                .filters-container button {
                    padding: 8px 12px; background-color: var(--editor-bg);
                    color: var(--text-primary); border: 1px solid var(--border-color);
                    border-radius: 4px; font-size: 0.9em; font-family: inherit;
                }
                body.theme-dark .filters-container input[type="date"]::-webkit-calendar-picker-indicator,
                body.theme-blue-neon .filters-container input[type="date"]::-webkit-calendar-picker-indicator,
                body.theme-authenticheck-dark .filters-container input[type="date"]::-webkit-calendar-picker-indicator {
                    filter: invert(1);
                }
                .filters-container button { cursor: pointer; background-color: var(--color-primary-01); color: var(--btn-primary-text, #fff); }
                body.theme-authenticheck-dark .filters-container button { color: #0A192F; } /* Specific text color for this theme's primary button */
                .filters-container button:hover { opacity: 0.9; }
                
                .print-dashboard-btn {
                    padding: 8px 12px; background-color: #28a745; color: white;
                    border: none; border-radius: 4px; cursor: pointer; font-size: 0.9em;
                }
                .print-dashboard-btn:hover { opacity: 0.9; }
        
                .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px; }
                .metric-card {
                    background-color: var(--editor-bg); 
                    border: 1px solid var(--border-color);
                    border-radius: 8px; 
                    padding: 20px; 
                    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
                    display: flex; 
                    flex-direction: column; 
                    position: relative;
                }
                .metric-card.full-width { grid-column: 1 / -1; }
                .metric-card h3 {
                    margin-top: 0; margin-bottom: 15px; font-size: 1.1em; color: var(--text-secondary);
                    border-bottom: 1px solid var(--border-color); padding-bottom: 8px; font-weight: 500;
                }
                .metric-card .value { font-size: 2em; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
                .metric-card .details { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.5; }
                .metric-card .details div { margin-bottom: 5px; }
                .metric-card .details span { font-weight: 500; color: var(--text-primary); margin-left: 6px; }
                .metric-card small { font-size: 0.8em; color: var(--text-secondary); margin-top: auto; padding-top: 10px; }
                
                .print-element-btn {
                    position: absolute; top: 10px; right: 10px;
                    background: rgba(128,128,128,0.1); border: 1px solid var(--border-color);
                    color: var(--text-secondary); border-radius: 4px;
                    padding: 4px 6px; cursor: pointer; font-size: 0.9em; opacity: 0.7;
                }
                .print-element-btn:hover { opacity: 1; background: rgba(128,128,128,0.2); }
                .print-element-btn svg { width: 14px; height: 14px; vertical-align: middle; stroke: currentColor; }
        
                .chart-container { margin-top: 15px; position: relative; height: 300px; width: 100%; }
                canvas { max-width: 100%; max-height: 100%; }
                .chart-container text, .chart-container .tick text { fill: var(--text-secondary) !important; } /* For SVG based text in charts */
                .chart-container .chartjs-legend-title, .chart-container .chartjs-axis-title { color: var(--text-secondary) !important; }
        
        
                #dailyInsightsContainer h2 { margin-top: 30px; color: var(--text-primary); }
                .daily-insight-card {
                    background-color: var(--editor-bg); border: 1px solid var(--border-color);
                    border-radius: 8px; padding: 15px; margin-bottom: 15px;
                }
                .daily-insight-card h4 { margin-top: 0; color: var(--color-primary-01); }
                .daily-insight-card p { font-size: 0.9em; margin: 5px 0; color: var(--text-secondary); }
                .daily-insight-card p strong { color: var(--text-primary); }
        
                .refresh-button, .download-button {
                    padding: 10px 15px; border-radius: 5px; border: 1px solid var(--color-primary-01);
                    background-color: var(--color-primary-01); color: var(--btn-primary-text, #fff);
                    cursor: pointer; font-size: 1em; margin-top: 20px; margin-right: 10px;
                }
                body.theme-authenticheck-dark .refresh-button, body.theme-authenticheck-dark .download-button { color: #0A192F; }
                .refresh-button:hover, .download-button:hover { opacity: 0.9; }
                
                .chart-nav-controls { display: flex; align-items: center; gap: 8px; }
                .chart-nav-btn {
                    padding: 5px 10px; font-size: 0.9em; background-color: var(--editor-bg);
                    border: 1px solid var(--border-color); color: var(--text-primary);
                    cursor: pointer; border-radius: 4px;
                }
                .chart-nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
                .chart-nav-btn:hover:not(:disabled) { background-color: var(--color-primary-01); color: var(--btn-primary-text, #fff); }
                 body.theme-authenticheck-dark .chart-nav-btn:hover:not(:disabled) { color: #0A192F; }
        
        
                /* Analyzed Text Output Area */
                #dashboardHighlightedText {
                    padding: 10px; line-height: 1.6; text-align: left;
                    background-color: var(--editor-bg); border: 1px solid var(--border-color);
                    border-radius: 4px; font-family: var(--font-family-monospace);
                    font-size: 14px; white-space: pre-wrap; word-break: break-word;
                    /* max-height: 300px; Removed for full display */
                    /* overflow-y: auto; Removed for full display */
                    max-height: none; /* Ensure it can grow indefinitely */
                    overflow-y: visible; /* Ensure no scrollbar appears and content is not clipped */
                    color: var(--text-primary);
                }
                #dashboardHighlightedText .segment-wrapper {
                    display: inline-block; position: relative;
                    margin: 20px 6px 5px 6px; /* Increased top margin for tooltip */
                    vertical-align: top;
                }
                #dashboardHighlightedText .segment-text-content {
                    display: block; padding: 4px 6px; border-radius: 3px;
                    font-size: 1em; line-height: 1.5; white-space: pre-wrap;
                    min-width: 20px; text-align: center; box-sizing: border-box;
                }
                #dashboardHighlightedText .segment-tooltip {
                    position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
                    background-color: var(--editor-bg); color: var(--text-primary);
                    border: 1px solid var(--border-color); border-radius: 4px;
                    padding: 3px 7px; font-size: 0.75em; white-space: normal; /* Allow wrap */
                    max-width: 170px; min-width: 60px; word-break: break-word; text-align: center;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1); z-index: 10;
                    opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s;
                    margin-bottom: 5px;
                }
                #dashboardHighlightedText .segment-wrapper:hover .segment-tooltip { opacity: 1; visibility: visible; }
        
                /* Highlight Styles for Analyzed Text */
                .highlight-yellow-typed  { background-color: var(--highlight-yellow-bg); }
                .highlight-red-pasted    { background-color: var(--highlight-red-bg); }
                .highlight-green-corrected { background-color: var(--highlight-green-bg); }
        
                /* Light Theme (Default text color for highlights) */
                body.theme-light .highlight-yellow-typed,
                body.theme-light .highlight-red-pasted,
                body.theme-light .highlight-green-corrected { color: #000000; }
        
                /* Dark Theme text color for highlights */
                body.theme-dark .highlight-yellow-typed,
                body.theme-dark .highlight-red-pasted,
                body.theme-dark .highlight-green-corrected { color: var(--text-primary); }
        
                /* Blue Neon text color for highlights */
                body.theme-blue-neon .highlight-yellow-typed  { color: var(--color-warning); text-shadow: 0 0 2px var(--color-warning); }
                body.theme-blue-neon .highlight-red-pasted    { color: var(--color-error);   text-shadow: 0 0 2px var(--color-error);   }
                body.theme-blue-neon .highlight-green-corrected { color: var(--color-success); text-shadow: 0 0 2px var(--color-success); }
                
                /* AuthentiCheck Dark text color for highlights */
                body.theme-authenticheck-dark .highlight-yellow-typed  { color: var(--color-warning); }
                body.theme-authenticheck-dark .highlight-red-pasted    { color: var(--color-error);   }
                body.theme-authenticheck-dark .highlight-green-corrected { color: var(--color-success); }
        
        
        
        
        /* =========================================== */
        /* ===         MOBILE RESPONSIVE CSS         === */
        /* =========================================== */
        
        @media (max-width: 768px) {
        
            body {
                padding: 10px; 
            }
        
            .logo{
                display: none;
            }
        
            .dashboard-header {
                flex-direction: column; /* Stack title and filters vertically */
                align-items: flex-start; /* Align to the left */
                gap: 15px; /* Add space between the title and the filters */
            }
        
            .filters-container {
                flex-direction: column; /* Stack filter items vertically */
                align-items: stretch; /* Make items take full width */
                width: 100%; /* Ensure container takes full width */
            }
        
            .filters-container button {
                width: 100%; /* Make buttons full-width for easier tapping */
            }
        
            /* --- 3. Adjust Font Sizes for Readability --- */
            .dashboard-header h1 {
                font-size: 1.5em; /* Slightly smaller title */
            }
        
            .metric-card .value {
                font-size: 1.8em; /* Make the large numbers a bit smaller */
            }
            body {
                padding: 10px; /* Reduce padding on smaller screens */
            }
        
            /* --- 2. Fix Header and Filters --- */
            .dashboard-header {
                flex-direction: column; /* Stack title and filters vertically */
                align-items: flex-start; /* Align to the left */
                gap: 15px; /* Add space between the title and the filters */
            }
        
            .filters-container {
                flex-direction: column; /* Stack filter items vertically */
                align-items: stretch; /* Make items take full width */
                width: 100%; /* Ensure container takes full width */
            }
        
        
            .dashboard-grid {
                /* The auto-fit grid will handle this, but you could reduce the min-width if needed */
                /* grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); */
            }
        
          .logo {
                display: none !important;
            }
            /* --- 4. Usability Fix for Analyzed Text Tooltips --- */
            /* On touch devices, :hover doesn't work. We make the tooltips always visible. */
            #dashboardHighlightedText .segment-tooltip {
                position: relative; /* Change from absolute to relative */
                transform: none;    /* Reset transforms */
                left: auto;
                bottom: auto;
                
                opacity: 1;         /* Make it visible */
                visibility: visible;
                
                margin-top: 5px;   /* Add space above the tooltip content */
                margin-bottom: 0;
                font-size: 0.8em;
                text-align: left;  /* Align text left for better block reading */
                max-width: 100%;   /* Allow it to take full width of the wrapper */
                box-shadow: none;  /* Remove shadow for a cleaner look in the flow */
            }
            
            #dashboardHighlightedText .segment-wrapper {
                display: block; /* Stack each segment vertically for clarity */
                margin: 15px 5px;
            }
        }
        
        /* In dashboard.html's <style> tag */
        
        /* Spotlight effect for the tutorial */
        .tutorial-spotlight-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10001; /* High z-index, but below the tooltip */
            opacity: 0;
            pointer-events: none; /* Allows clicks to pass through when hidden */
            transition: opacity 0.5s ease-in-out;
        }
        
        /* Base style for the new colored tooltips */
        .explanatory-tooltip {
            position: absolute;
            z-index: 10002; /* Must be higher than the spotlight overlay */
            padding: 12px 18px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            font-size: 15px;
            line-height: 1.5;
            max-width: 320px;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: scale(0.9) translateY(10px); /* Initial state for animation */
        
            animation: pulse 2s infinite;
        
        }
        
        .explanatory-tooltip.visible {
            opacity: 1;
            transform: scale(1) translateY(0); /* Final state for animation */
        }
        
        .explanatory-tooltip strong {
            display: block;
            margin-bottom: 5px;
        }
        
        /* --- Color-specific tooltip styles --- */
        .explanatory-tooltip.yellow {
            background-color: var(--color-warning, #f39c12);
            color: #111; /* Dark text for high contrast on yellow */
            text-shadow: none;
        }
        .explanatory-tooltip.green {
            background-color: var(--color-success, #2ecc71);
            color: var(--btn-primary-text, #ffffff);
        }
        .explanatory-tooltip.red {
            background-color: var(--color-error, #e74c3c);
            color: var(--btn-primary-text, #ffffff);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        </style>
   
   <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: sans-serif; /* Default, theme can override */
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* DEFAULT THEME VARIABLES (Light) */
        :root {
            --body-background-color: #f4f6f8;
            --editor-bg: #ffffff;
            --header-bg: rgba(255, 255, 255, 0.9);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --border-color: #e0e0e0;
            --color-primary-01: #3498db; /* Pleasant blue */
            --color-error: #e74c3c;
            --color-warning: #f39c12;
            --color-success: #2ecc71;
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #ffffff;
            --btn-hover-bg: #2980b9;
            --highlight-red-bg: rgba(231, 76, 60, 0.25);    /* Pasted */
            --highlight-yellow-bg: rgba(243, 156, 18, 0.15); /* Typed no correction */
            --highlight-green-bg: rgba(46, 204, 113, 0.1);  /* Corrected */
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 0, 0, 0.5);
            --icon-stroke-color: var(--text-secondary);
            --icon-stroke-color-active: var(--text-primary);
            --font-family-base: sans-serif;
        }

        body { /* Apply base variables */
            background-color: var(--body-background-color);
            color: var(--text-primary);
            font-family: var(--font-family-base);
        }


        body.theme-dark {
            --body-background-color: #1a1d24;
            --editor-bg: #232730;
            --header-bg: rgba(35, 39, 48, 0.85);
            --text-primary: #e0e0e0;
            --text-secondary: #909090;
            --border-color: #383c4a;
            --color-primary-01: #5dade2; /* Lighter blue */
            --color-error: #ff6b6b;
            --color-warning: #ffc078;
            --color-success: #76d7c4;
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #1a1d24; /* Dark text on light blue button */
            --btn-hover-bg: #4a90e2;
            --highlight-red-bg: rgba(255, 107, 107, 0.2);
            --highlight-yellow-bg: rgba(255, 192, 120, 0.2);
            --highlight-green-bg: rgba(118, 215, 196, 0.15);
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 0, 0, 0.7);
        }

        body.theme-blue-neon {
            --body-background-color: #0a0a23;
            --editor-bg: #00001a;
            --header-bg: rgba(10, 10, 40, 0.9);
            --text-primary: #00e5ff;      /* Bright Neon Cyan */
            --text-secondary: #00aacc;    /* Dimmer Neon Cyan */
            --border-color: #0077ff;      /* Neon Blue Border */
            --color-primary-01: #00e5ff;  /* Neon Cyan as primary accent */
            --color-error: #ff3366;      /* Neon Pink/Red */
            --color-warning: #ffff66;    /* Neon Yellow */
            --color-success: #66ff66;    /* Neon Green */
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #0a0a23; /* Dark text on bright button */
            --btn-hover-bg: #00c4dd;
            --highlight-red-bg: rgba(255, 51, 102, 0.3);
            --highlight-yellow-bg: rgba(255, 255, 102, 0.3);
            --highlight-green-bg: rgba(102, 255, 102, 0.2);
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(0, 10, 40, 0.8);
            --font-family-base: 'VT323', monospace;
        }
        body.theme-blue-neon #jsEditor,
        body.theme-blue-neon #highlighted-output-container {
            caret-color: #00e5ff;
        }
        body.theme-blue-neon .dashboard-header h1,
        body.theme-blue-neon .metric-card h3,
        body.theme-blue-neon .metric-card .value,
        body.theme-blue-neon .daily-insight-card h4 {
            text-shadow: 0 0 3px var(--color-primary-01), 0 0 5px var(--color-primary-01);
        }


        /* NEW: AuthentiCheck Dark Theme (Default) */
        body.theme-authenticheck-dark {
            --body-background-color: #0A192F; /* Deep Blue from index.html */
            --editor-bg: #112240;      /* Card background from index.html */
            --header-bg: rgba(10, 25, 47, 0.85); /* Header from index.html */
            --text-primary: #ccd6f6;   /* Light text from index.html */
            --text-secondary: #8892b0; /* Secondary text from index.html */
            --border-color: #1d3150;   /* Card border from index.html */
            --color-primary-01: #64ffda; /* Teal accent from index.html */
            --color-error: #ff5252;    /* Bright red for contrast */
            --color-warning: #ffd700;  /* Gold/bright yellow for contrast */
            --color-success: #64ffda;  /* Teal accent for success */
            --btn-primary-bg: var(--color-primary-01);
            --btn-primary-text: #0A192F; /* Dark blue text on teal button */
            --btn-hover-bg: #52c4b3;    /* Darker teal for hover */
            --highlight-red-bg: rgba(255, 82, 82, 0.15);   /* Pasted */
            --highlight-yellow-bg: rgba(255, 215, 0, 0.1); /* Typed no correction */
            --highlight-green-bg: rgba(100, 255, 218, 0.1);/* Corrected */
            --modal-content-bg: var(--editor-bg);
            --modal-bg-overlay: rgba(7, 17, 31, 0.7);
            --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }
        body.theme-authenticheck-dark #jsEditor,
        body.theme-authenticheck-dark #highlighted-output-container {
            caret-color: var(--color-primary-01);
        }

        /* General styles using CSS variables */
        .header {
            padding: 10px 20px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--header-bg);
            backdrop-filter: blur(8px); position: sticky; top: 0; z-index: 1000;
        }
        .logo span { font-size: 1.5em; font-weight: bold; color: var(--color-primary-01); }
        .actions-group { display: flex; align-items: center; gap: 12px; }
        
        .btn {
            padding: 8px 15px; font-size: 14px; font-weight: 500;
            border: 1px solid var(--border-color); border-radius: 6px;
            background-color: var(--editor-bg); color: var(--text-primary);
            cursor: pointer; display: flex; align-items: center; gap: 6px;
            white-space: nowrap; transition: all 0.2s ease-in-out;
        }
        .btn:hover:not(:disabled) {
            background-color: var(--btn-hover-bg); color: var(--btn-primary-text);
            transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-primary {
            background-color: var(--btn-primary-bg); color: var(--btn-primary-text);
            border-color: var(--btn-primary-bg);
        }

        #printDashboardButton { gap: 8px; }

        .btn-primary:hover:not(:disabled) {
            background-color: var(--btn-hover-bg); border-color: var(--btn-hover-bg);
        }
        .btn svg { width: 16px; height: 16px; stroke: var(--icon-stroke-color); }
        .btn-primary svg { stroke: var(--btn-primary-text); }
        .btn:hover svg { stroke: var(--btn-primary-text); }

        .theme-controls { display: flex; border: 1px solid var(--border-color); border-radius: 6px; overflow: hidden; }
        .theme-controls .theme-btn {
            padding: 8px 10px !important; border: none !important;
            border-right: 1px solid var(--border-color) !important;
            border-radius: 0 !important; background-color: transparent; color: var(--text-secondary);
        }
        .theme-controls .theme-btn:last-child { border-right: none !important; }
        .theme-controls .theme-btn:hover { background-color: var(--btn-hover-bg) !important; color: var(--btn-primary-text) !important; transform: none; box-shadow: none;}
        .theme-controls .theme-btn.active-theme { background-color: var(--btn-primary-bg) !important; color: var(--btn-primary-text) !important; }
        .theme-controls .theme-btn.active-theme svg { stroke: var(--btn-primary-text) !important; }
        .theme-controls .theme-btn svg { stroke: currentColor; } /* Let icon color follow button text color */

        .main-content { display: flex; flex-direction: column; gap: 15px; padding: 15px; flex-grow: 1; }
        .input-area {
            display: flex; flex-direction: column; flex-grow: 1; min-height: 300px;
            border: 1px solid var(--border-color); border-radius: 6px;
            overflow: hidden; background-color: var(--editor-bg);
        }
        #jsEditor {
            width: 100%; min-height: 150px; flex-grow: 1; padding: 12px;
            font-size: 16px; line-height: 1.6; border: none;
            background-color: transparent; color: var(--text-primary);
            resize: vertical; box-sizing: border-box; font-family: inherit;
        }
        #jsEditor:focus { outline: none; }
        textarea::placeholder { color: var(--text-secondary); opacity: 0.7; }

        #highlighted-output-container {
            background-color: transparent; min-height: 100px; max-height: 400px;
            overflow-y: auto; font-size: 16px; line-height: 1.6;
            padding: 12px; white-space: normal; word-break: break-word;
            box-sizing: border-box; color: var(--text-primary); font-family: inherit;
            text-align: left;

        }
        .segment-wrapper {
            display: inline-block; position: relative;
            margin: 20px 6px 5px 6px; /* Top margin for tooltip */
            vertical-align: top;
        }
        .segment-text-content {
            display: block; padding: 4px 6px; border-radius: 3px;
            font-size: 1em; line-height: 1.5; white-space: pre-wrap;
            min-width: 20px; text-align: center; box-sizing: border-box;
        }
        .segment-tooltip {
            position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
            background-color: var(--editor-bg); color: var(--text-primary);
            border: 1px solid var(--border-color); border-radius: 4px;
            padding: 3px 7px; font-size: 0.75em; white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15); z-index: 10;
            opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s;
            margin-bottom: 5px;
        }
        .segment-wrapper:hover .segment-tooltip { opacity: 1; visibility: visible; }

        /* Highlight Styles */
        .highlight-yellow-typed { background-color: var(--highlight-yellow-bg); color: #000000; }
        .highlight-red-pasted { background-color: var(--highlight-red-bg); color: #000000; }
        .highlight-green-corrected { background-color: var(--highlight-green-bg); color: #000000; }

        body.theme-dark .highlight-yellow-typed,
        body.theme-dark .highlight-red-pasted,
        body.theme-dark .highlight-green-corrected {
            color: var(--text-primary); /* Off-white text for dark theme highlights */
        }
        body.theme-blue-neon .highlight-yellow-typed { color: var(--color-warning); text-shadow: 0 0 2px var(--color-warning); }
        body.theme-blue-neon .highlight-red-pasted { color: var(--color-error); text-shadow: 0 0 2px var(--color-error); }
        body.theme-blue-neon .highlight-green-corrected { color: var(--color-success); text-shadow: 0 0 2px var(--color-success); }

        body.theme-authenticheck-dark .highlight-yellow-typed { color: var(--color-warning); }
        body.theme-authenticheck-dark .highlight-red-pasted { color: var(--color-error); }
        body.theme-authenticheck-dark .highlight-green-corrected { color: var(--color-success); }


        .stats-bar {
            padding: 10px 15px; background-color: var(--editor-bg);
            border: 1px solid var(--border-color); border-radius: 6px;
            font-size: 13px; display: flex; flex-wrap: wrap; gap: 8px 18px;
            color: var(--text-secondary);
        }
        .stats-bar div { flex-shrink: 0; }
        .stats-bar span { font-weight: 600; color: var(--text-primary); margin-left: 5px; }
        body.theme-blue-neon .stats-bar span,
        body.theme-authenticheck-dark .stats-bar span { text-shadow: 0 0 1px var(--text-primary); }


        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--modal-bg-overlay);
            display: none; justify-content: center; align-items: center;
            z-index: 1050; animation: fadeInModalOverlay 0.3s ease-out forwards;
        }
        .modal-overlay.show { display: flex; }
        .dashboard-modal-content {
            background-color: var(--modal-content-bg);
            border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 90%; height: 90vh; max-width: 1200px;
            display: flex; flex-direction: column; overflow: hidden;
            animation: slideInModalContent 0.4s ease-out forwards;
        }
        .dashboard-modal-header {
            padding: 12px 20px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color); flex-shrink: 0;
        }
        .dashboard-modal-header h3 { margin: 0; font-size: 1.2em; font-weight: 600; color: var(--text-primary); }
        body.theme-blue-neon .dashboard-modal-header h3,
        body.theme-authenticheck-dark .dashboard-modal-header h3 { text-shadow: 0 0 2px var(--text-primary); }
        .dashboard-modal-close-btn {
            background: none; border: none; font-size: 1.8em; color: var(--text-secondary);
            cursor: pointer; padding: 5px; line-height: 1;
        }
        .dashboard-modal-close-btn:hover { color: var(--color-error); }
        .dashboard-modal-body { flex-grow: 1; padding: 0; overflow: hidden; }
        .dashboard-modal-body iframe { width: 100%; height: 100%; border: none; }

        @keyframes fadeInModalOverlay { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInModalContent {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @media print {
            body {
                background-color: white !important;
                color: black !important;
                font-size: 9pt; /* Smaller font for better fit */
            }

            .dashboard-header, .filters-container, .refresh-button, .download-button {
                display: none !important;
            }

            .dashboard-grid {
                grid-template-columns: 1fr !important; /* Force single column layout */
            }

            .metric-card {
                box-shadow: none !important;
                border: 1px solid #ccc !important;
                page-break-inside: avoid !important;
            }

            /* This is the key for full-width charts in print */
            .chart-container {
                width: 100% !important;
                height: auto !important; /* Let height be automatic */
                padding: 10px 0;
            }
        }

        @media print {
            body { background-color: white !important; color: black !important; font-family: Arial, sans-serif !important; }
            :root { /* Override variables for print if necessary, or use direct values below */ }
            .header, #jsEditor, .modal-overlay, .stats-bar { display: none !important; }
            .main-content { padding: 0; }
            #highlighted-output-container {
                border: none !important; max-height: none !important; overflow: visible !important; font-size: 12pt !important;
                background-color: white !important; color: black !important;
            }
            .segment-wrapper { margin: 2px 4px !important; }
            .segment-text-content {
                -webkit-print-color-adjust: exact !important; color-adjust: exact !important;
                 color: black !important; /* Force black text for all segments on print */
            }
            .highlight-yellow-typed { background-color: #fffacd !important; } /* LemonChiffon */
            .highlight-red-pasted { background-color: #ffcccb !important; } /* LightCoral */
            .highlight-green-corrected { background-color: #90ee90 !important; } /* LightGreen */
            .segment-tooltip { display: none !important; }
        }
        @media (max-width: 768px) {
            .logo {
                display: none !important;
            }
            .logo span
            {
                display: none !important;
            }
            .header {
        /* Allow items to wrap to the next line */
        flex-wrap: wrap;
        padding: 10px;
        gap: 10px; /* Add some space when items wrap */
    }

    .logo {
        /* Hide the logo text to save space */
        display: none;
    }

    .actions-group {
        /* Ensure the group of buttons takes available space */
        width: 100%;
        justify-content: center; /* Center the buttons */
    }

    .main-content {
        padding: 10px; /* Reduce padding on smaller screens */
    }

    /* Make the text editor and stats bar more compact */
    #jsEditor, #highlighted-output-container {
        font-size: 14px;
    }
    .stats-bar {
        font-size: 12px;
        gap: 4px 12px; /* Reduce gap between stats */
    }


        }
        .hamburger-menu {
            position: relative; /* Context for the dropdown */
            display: inline-block;
        }

        .hamburger-content {
            display: none; /* Hidden by default */
            position: absolute;
            right: 0;
            top: calc(100% + 8px); /* Position below the button with a gap */
            background-color: var(--editor-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1010;
            min-width: 200px;
            overflow: hidden; /* Ensures child items respect the border-radius */
            padding-top: 5px;
            padding-bottom: 5px;
        }

.hamburger-content.show {
    display: block; /* Class to show the menu */
}

/* Style for individual items within the dropdown */
.hamburger-item {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-start; /* Align text and icon to the left */
    gap: 12px;
    padding: 10px 15px;
    border: none;
    border-radius: 0;
    background-color: transparent;
    box-shadow: none;
    transform: none; /* Override any transform on .btn */
    font-weight: 500;
}

.hamburger-item:hover:not(:disabled) {
    background-color: var(--btn-hover-bg) !important;
    color: var(--btn-primary-text) !important;
    transform: none !important; /* Ensure no movement on hover */
    box-shadow: none !important;
}
.hamburger-item:hover:not(:disabled) svg {
    stroke: var(--btn-primary-text) !important;
}

/* The container for theme buttons inside the menu */
.hamburger-content .theme-controls {
    display: block; /* Stack items vertically */
    border: none; /* The parent has the border now */
    border-radius: 0;
    overflow: visible;
    border-top: 1px solid var(--border-color); /* Separator line */
    margin-top: 5px;
    padding-top: 5px;
}

/* Specific overrides for theme buttons inside the menu */
.hamburger-content .theme-controls .theme-btn {
    border: none !important;
    border-radius: 0 !important;
    background-color: transparent !important;
}

.hamburger-content .theme-controls .theme-btn.active-theme {
    background-color: var(--btn-primary-bg) !important;
    color: var(--btn-primary-text) !important;
}

.hamburger-content .theme-controls .theme-btn.active-theme svg {
    stroke: var(--btn-primary-text) !important;
}

/* Ensure the SVG icons in the hamburger menu items use the button's text color */
.hamburger-item svg {
    stroke: var(--icon-stroke-color);
    flex-shrink: 0; /* Prevent icon from shrinking */
}
.hamburger-item.danger:hover:not(:disabled) {
    background-color: var(--color-error) !important;
    color: var(--btn-primary-text) !important; /* Use a color that contrasts with the error color */
}
.hamburger-item.danger:hover:not(:disabled) svg {
    stroke: var(--btn-primary-text) !important;
}

/* Add this line to the hamburger-item class to make the hover effect smoother */
.hamburger-item {
    /* ... existing styles ... */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out; /* Add this */
}

.viz-container {
            width: 50px; height: 8px; display: flex; background-color: rgba(128,128,128,0.2);
            border: 1px solid var(--border-color); border-radius: 4px; overflow: hidden;
        }
        .viz-bar { height: 100%; transition: width 0.3s ease-in-out; }
        .viz-typed { background-color: var(--color-success); }
        .viz-pasted { background-color: var(--color-error); }
        .numeric-stats-container { font-size: 0.8em; color: var(--text-secondary); }

        /* Print Overlay Styles */
        #print-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(10, 25, 47, 0.85); /* Dark overlay */
            color: #ccd6f6;
            display: none; justify-content: center; align-items: center;
            z-index: 2000; text-align: center; backdrop-filter: blur(5px);
        }
        #print-overlay.show { display: flex; }
        .print-overlay-content h2 { font-size: 1.5em; margin-bottom: 10px; }

        .numeric-stats-container {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-left: 2px;
            font-weight: normal;
        }


    </style>

    
<script data-cfasync="false" nonce="921b10c7-2e74-4070-aa63-9875a8976bea">try{(function(w,d){!function(fv,fw,fx,fy){if(fv.zaraz)console.error("zaraz is loaded twice");else{fv[fx]=fv[fx]||{};fv[fx].executed=[];fv.zaraz={deferred:[],listeners:[]};fv.zaraz._v="5858";fv.zaraz._n="921b10c7-2e74-4070-aa63-9875a8976bea";fv.zaraz.q=[];fv.zaraz._f=function(fz){return async function(){var fA=Array.prototype.slice.call(arguments);fv.zaraz.q.push({m:fz,a:fA})}};for(const fB of["track","set","debug"])fv.zaraz[fB]=fv.zaraz._f(fB);fv.zaraz.init=()=>{var fC=fw.getElementsByTagName(fy)[0],fD=fw.createElement(fy),fE=fw.getElementsByTagName("title")[0];fE&&(fv[fx].t=fw.getElementsByTagName("title")[0].text);fv[fx].x=Math.random();fv[fx].w=fv.screen.width;fv[fx].h=fv.screen.height;fv[fx].j=fv.innerHeight;fv[fx].e=fv.innerWidth;fv[fx].l=fv.location.href;fv[fx].r=fw.referrer;fv[fx].k=fv.screen.colorDepth;fv[fx].n=fw.characterSet;fv[fx].o=(new Date).getTimezoneOffset();if(fv.dataLayer)for(const fF of Object.entries(Object.entries(dataLayer).reduce(((fG,fH)=>({...fG[1],...fH[1]})),{})))zaraz.set(fF[0],fF[1],{scope:"page"});fv[fx].q=[];for(;fv.zaraz.q.length;){const fI=fv.zaraz.q.shift();fv[fx].q.push(fI)}fD.defer=!0;for(const fJ of[localStorage,sessionStorage])Object.keys(fJ||{}).filter((fL=>fL.startsWith("_zaraz_"))).forEach((fK=>{try{fv[fx]["z_"+fK.slice(7)]=JSON.parse(fJ.getItem(fK))}catch{fv[fx]["z_"+fK.slice(7)]=fJ.getItem(fK)}}));fD.referrerPolicy="origin";fD.src="/cdn-cgi/zaraz/s.js?z="+btoa(encodeURIComponent(JSON.stringify(fv[fx])));fC.parentNode.insertBefore(fD,fC)};["complete","interactive"].includes(fw.readyState)?zaraz.init():fv.addEventListener("DOMContentLoaded",zaraz.init)}}(w,d,"zarazData","script");window.zaraz._p=async eC=>new Promise((eD=>{if(eC){eC.e&&eC.e.forEach((eE=>{try{const eF=d.querySelector("script[nonce]"),eG=eF?.nonce||eF?.getAttribute("nonce"),eH=d.createElement("script");eG&&(eH.nonce=eG);eH.innerHTML=eE;eH.onload=()=>{d.head.removeChild(eH)};d.head.appendChild(eH)}catch(eI){console.error(`Error executing script: ${eE}\n`,eI)}}));Promise.allSettled((eC.f||[]).map((eJ=>fetch(eJ[0],eJ[1]))))}eD()}));zaraz._p({"e":["(function(w,d){})(window,document)"]});})(window,document)}catch(e){throw fetch("/cdn-cgi/zaraz/t"),e;};</script></head>
<body>
    <div class="header">
        <div class="logo">
            <span>Authentis</span>
        </div>
        <div class="actions-group">
            <!-- The Analysis button remains visible -->
            <button class="btn btn-primary" id="analysisButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
                Analysis
            </button>
            <button class="btn" id="printDashboardButton" title="Print Dashboard Report">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>
                </svg>
                <span>Print</span>
                <div class="viz-container">
                    <div class="viz-bar viz-typed" id="vizTypedBar"></div>
                    <div class="viz-bar viz-pasted" id="vizPastedBar"></div>
                </div>
                <div class="numeric-stats-container">
                    (<span id="numericTyped">0</span>T / <span id="numericPasted">0</span>P)
                </div>
            </button>



            <!-- NEW: Hamburger Menu Container -->
            <div class="hamburger-menu" id="hamburgerMenu">
                <!-- The button that shows the menu -->
                <button class="btn" id="hamburger-btn" title="Settings and Demo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                
                <!-- The dropdown content (hidden by default) -->
                <div class="hamburger-content" id="hamburger-content">
                    <button class="btn hamburger-item" id="startDemoButton">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        <span>Start Demo</span>
                    </button>
                    <div class="theme-controls">
                         <button class="btn theme-btn hamburger-item" id="themeAuthentiCheckDarkBtn" title="AuthentiCheck Dark Theme (Default)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                            <span>Authentis</span>
                        </button>
                        <button class="btn theme-btn hamburger-item" id="themeLightBtn" title="Light Theme">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span>Light</span>
                        </button>
                        <button class="btn theme-btn hamburger-item" id="themeDarkBtn" title="Dark Theme">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <span>Dark</span>
                        </button>
                        <button class="btn theme-btn hamburger-item" id="themeBlueNeonBtn" title="Blue Neon Theme">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                            </svg>
                            <span>Blue Neon</span>
                        </button>
                        <div style="border-top: 1px solid var(--border-color); margin: 5px 0;"></div>
<button class="btn hamburger-item danger" id="clearDataButton" title="Permanently delete all tracked data">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
    </svg>
    <span>Clear All Data</span>
</button>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="input-area">
            <textarea id="jsEditor" placeholder="Start typing here... Your activity will be tracked."></textarea>
            <div id="highlighted-output-container" style="display: none;"></div>
        </div>
        <div class="stats-bar">
            <div>Session Time: <span id="statSessionTime">0s</span></div>
            <div>Typed Chars: <span id="statTypedChars">0</span></div>
            <div>Pasted Chars: <span id="statPastedChars">0</span></div>
            <div>Avg. Speed: <span id="statAvgSpeed">0 WPM</span></div>
            <div>Backspaces: <span id="statBackspaces">0</span></div>
            <div>Deletes: <span id="statDeletes">0</span></div>
            <div>Pastes: <span id="statPasteCount">0</span></div>
        </div>
    </div>

    <div class="modal-overlay" id="dashboardModalOverlay">
        <div class="dashboard-modal-content">
            <div class="dashboard-modal-header">
                <h3>Tracking Dashboard</h3>
                <button class="dashboard-modal-close-btn" id="closeDashboardModalBtn"></button>
            </div>
            <div class="dashboard-modal-body">
                <iframe id="dashboardFrame" src="about:blank"></iframe>
            </div>
        </div>
    </div>
    <script src="main.js"></script>
    <script src="tutorial.js"></script>
    <div id="print-overlay">
        <div class="print-overlay-content">
            <h2>Preparing Print Preview...</h2>
            <p>Please wait a moment.</p>
        </div>
    </div>

</body>
</html>  
